# HR отдел
# Описание проекта
HR-аналитики компании «Работа с заботой» помогают бизнесу оптимизировать управление персоналом: бизнес предоставляет данные, а аналитики предлагают, как избежать финансовых потерь и оттока сотрудников. В этом HR-аналитикам пригодится машинное обучение, с помощью которого получится быстрее и точнее отвечать на вопросы бизнеса.

Компания предоставила данные с характеристиками сотрудников компании. Среди них — уровень удовлетворённости сотрудника работой в компании. Эту информацию получили из форм обратной связи: сотрудники заполняют тест-опросник, и по его результатам рассчитывается доля их удовлетворённости от 0 до 1, где 0 — совершенно неудовлетворён, 1 — полностью удовлетворён.

Заказчик предоставил данные для предсказания уровня удовлетворенности:
1) Тренировочная выборка: train_job_satisfaction_rate.csv;
2) Входные признаки тестовой выборки: test_features.csv;
3) Целевой признак тестовой выборки: test_target_job_satisfaction_rate.csv.

Заказчик предоставил данные для предсказания увольния сотрудника из компании:
1) Тренировочная выборка: train_quit.csv;
2) Входные признаки тестовой выборки: test_features.csv;
3) Целевой признак тестовой выборки: test_target_quit.csv.

Признаки:
- `id` - уникальный идентификатор сотрудника;
- `dept` - отдел, в котором работает сотрудник;
- `level` - уровень занимаемой должности;
- `workload` - уровень загруженности сотрудника;
- `employment_years ` - длительность работы в компании (в годах);
- `last_year_promo ` - показывает, было ли повышение за последний год;
- `last_year_violations ` - показывает, нарушал ли сотрудник трудовой договор за последний год;
- `supervisor_evaluation ` - оценка качества работы сотрудника, которую дал руководитель;
- `salary` - ежемесячная зарплата сотрудника;
- `job_satisfaction_rate ` - уровень удовлетворённости сотрудника работой в компании, целевой признак.

# Цель проекта

Дать рекомендации бизнесу для повышения удовлетворенности сотрудников и уменьшения их оттока из компании.

# Задачи проекта
1) Построить модель, которая сможет предсказать уровень удовлетворённости сотрудника.
2) Построить модель, которая сможет предсказать то, что сотрудник уволится из компании.

# План работы

Для выполнения 1 задачи:
1) Загрузка данных;
2) Предобработка данных;
3) Исследовательский анализ данных;
4) Подготовка данных;
5) Обучение моделей;
6) Вывод

Для выполнения 2 задачи:
1) Загрузка данных;
2) Предобработка данных;
3) Исследовательский анализ данных;
4) Добавление нового входного признака;
5) Подготовка данных;
6) Обучение моделей;
7) Вывод

# Вывод
Цель нашего проекта дать рекомендации бизнесу для повышения удовлетворенности сотрудников и уменьшения их оттока из компании. Для достижения данной цели нам нужно выполнить анализ предоставленных данных и построить 2 модели, которые смогут предсказать уровень удовлетворённости сотрудника и его увольнение.

**Этапы работы:**

**По первой задаче:**
1) Загрузили данные
2) Провели преобработку данных:
- пропуски и дубликаты не обнаружены.
- обнаружены пропуски и пустые значения в столбцах 'level', 'dept' в тестовых данных.

3) Провели исследовательский анализ данных:

Анализ по тренировочным данным:
- 75% сотрудников работают не больше 6 лет, половина из сотрудников работакют 1 - 3 года;
- в основном руководитель ставит оценку за качество работы 3 или 4;
- ежемесячная зарплата сотрудника в среднем на одного человека = 30000 рублей;
- попадается много выбросов в ежемесячной зарплате, но значения не аномальны, скорей всего повышенная зарплата у более опытных сотрудников;
- уровень удовлетворенности сотрудника в среднем на одного человка равен 0.56.
- 60% сотрудников приходится на отдел продаж и технологический. Больше всех сотрудников в отделе продаж(37.9%).
- Практически поровну должностей  junior и middle. Остальная часть(9%) приходится на sinior.
- Половина сотрудников имеет среднюю загруженность, 30% низкую и 18% высокую.
- 3% сотрудников получили повышение за последний год.
- В основном сотрудники не нарушали трудовой договор за последний год, но есть исключения.

Анализ по сравнению двух групп `удовлетворен` и `не удоволетворен`:
- В среднем на одного работника группа 'не удовлетворен' получает оценку за качество работы = 3, а группа 'удовлетворен' 4
- В группе 'не удовлетворен' доля нарушителей трудового договора больше(25.3%).
- У неудовлетворенных сотрудников ежесячная зарплата по мединному значению меньше на 2400 рублей.

Анализ по тестовым данным:
- Каких - то особых различий между тестовыми и тренировочными данными нет

4) Провели подготовку данных:
- Тренировочные и тествоые данные сохранили в переменные X_train, x_test, y_train, y_test.
- Закодировали и масштабировали категориальные и количественные признаки с помощью пайпалайна.
- Обработали пропуски и пустые значения в пайплайне.

5) Обучили модель.
- Лучшая модель: DecisionTreeRegressor() с параметрамами preprocessor__num': MinMaxScaler(), 'models__min_samples_split': 13, 'models__min_samples_leaf': 5, 'models__max_depth': 12. 
Лучшая метрика на тренировочных данных SMAPE = 16.1, на тестовых данных SMAPE = 14.
- В целом модель присваевает низкую удовтеворенность у тех сотрудников, которые имеют не выскокую оценку за качество работы, небольшой стаж, зарплату, уровень занимаемой должности и имеют нарушения за трудовой договор.
- Повышения за последний год, отдел в котором работает сотрдуник, его загруженность не сильно влияет на удовлетворенность сотрудника.

**Вторая задача**
1) Загрузили данные
2) Провели преобработку данных:
- пропуски и дубликаты не обнаружены.

3) Провели исследовательский анализ данных:

Анализ по тренировочным данным:
 75% сотрудников работают в компании не больше 6 лет, половина работников трудятся 1-3 года;
- в среднем на одного человека оценка за качество работы выходит 4, есть выбросы со значением = 1, но такое событие реально, оставим как есть;
- в среднем на одного сотрудника ежемесячная зарпалата = 30000 рублей, попадается много выбросов, но значения вполне реальны, скорей всего повышенной зарплатой обладают болле опытные сотрудники.
- 59.1% сотрудников приходится на технологический отдел(23.2) и отдел продаж(35.9%).
- самых опытных специалистов 8.9%, остальная часть приходится по ровну на junior и middle;
- нагрузка распределна не равномерно, половина сотрудников имеет средную нагрузку, 30.2% среднюю, 16.9% выскокую;
- повышение за последний год было у 2.8%;
- 13.6% сотрудников нарушают трудовой договор.

Анализ по портрету уволенного сотрудника:
- в среднем проработал всего лишь 1 год;
- ежемесячная зарплата в среднем на 12000 рублей меньше;
- в основои имел низкий уровень загруженности;
- 88.9% из них это джуны, 9.6% - middle, 1.5% - sinior;
- больше всех уволилось из отдела technology, меньше всех из отдела hr.
- у уволенных sinior зарплата по всем отделам меньше чем у неуволенных, кроме отдела technology;
- из сотрудников которые нарушали трудовой договор 41.83% уволились.
- сотрудник с повышеним с большей вероятностью останется в компании.

Анализ по влиянию уровня удовлетворенности на увольнение сотрудника:
- медианное значение `job_satisfaction_rate` равное 0.66 выше у сотрудников,которые не уволилсь.
- у уволившихся сотрудников медианное значение `job_satisfaction_rate` равно 0.37.
- провели статистический тест, среднее значение `job_satisfaction_rate` группы `не уволился` больше, среднего значения группы `уволился`
  
4) Добавили `job_satisfaction_rate` в тренировочные данные:
- Выбросов не обнаружено, по мединному значению те кто уволился имеют удовлетворенность 0.36, кто не уволился 0.64.
- В целом наблюадется закономерность как и на тествоых данных.
- Мультиколлинеарнотсь не наблюдается.

5) Провели подготовку данных:
- Тренировочные и тествоые данные сохранили в переменные X_train_2, x_test_2, y_train_2, y_test_2.
- Целовой признак закодировали с помощью LabelEncoder()
- Закодировали и масштабировали категориальные и количественные признаки с помощью пайпалайна.
- Обработали пропуски и пустые значения в пайплайне.
- Избавились от дисбаланса классов методом oversampling.

6) Обучили модель.
- Получили лучшую модель DecisionTreeClassifier(random_state=30) с параметрами 'preprocessor__num': 'passthrough', 'models__min_samples_split': 2, 'models__min_samples_leaf': 3, 'models__max_depth': 5
- Метрика roc_auc на тренировчной выборке: 0.92.
- Метрика roc_auc на тествой выборке: 0.93..
- В принципе по исследоватльскому анализу и вправду уволнялось очень много джунов, модель уловила эту связь и видимо она стала решающей. По диаграмме размаха было видно что удовлетворенность сотрдуников в среднем выше у тех кто не уволися, и модель также придала этому немалое значение. Остальные признаки меньше по важности, но также суммарно внесли свой вклад, выше мы опредяляли, что среди уволенных сотрудников много тех у кого малый стаж работы, низкая нагруженность, небольшая зарпалата, что кстати характерно как раз для джунов.
- Признаки `dept`, `last_year_promo`, `last_year_violations` практически не влияют на предсказание целевого признака. Посмотрим как изменится метрика после удаление данных признаковт

**Рекомендации для бизнеса**:
В большинстве случаев недовальный и уволенный сотрудник это человек который занимал низкую должность, проработал недолго, имел не очень высокие оценки за качество работы, его нагруженность была низкая как и зарплата, короче под это описание больше всех подоходят джуны.

Возможная стратегия для удержания джунов:
1) Обеспечить поддержку и наставничество
- Опытный коллега, который будет молодому адаптироваться, отвечать на сложные вопросы

2) Создать возможность для обучения:
- доступ к курсам, вебинарам или конференциям, для развития навыков
- Помогть ему видеть свои сильные стороны и зоны роста, чтобы он понимал, как развиваться.

3) Поставить четкие цели и задачи:
- Определить измеримые цели, чтобы junior понимал, чего от него ожидают.

4) Показать перспективу роста:
- Объяснить, какие шаги нужно сделать для роста внутри компании.
- Пересматривать зарплату и должность в зависимости от прогресса.

5) Обеспечьте баланс между работой и личной жизнью:
- Предложить возможность удаленной работы или гибкого графика.

Главное — показать junior-специалисту, что он важен для компании, и создать условия для его роста. Когда человек видит перспективы, чувствует поддержку и понимает, что его труд ценится, он с большей вероятностью останется в компании надолго.
